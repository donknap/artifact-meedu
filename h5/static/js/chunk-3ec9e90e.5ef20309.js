(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ec9e90e"],{"0e15":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAAXNSR0IArs4c6QAAACFQTFRFAAAAmZmZmZmZmpqamZmZmJiYmpqamZmZmZmZmZmZmZmZj90NQwAAAAp0Uk5TAAV9fqChrq/y85vAgSoAAACVSURBVCjPY2AgAzBPFYAxGT0UgCTnqkSYgNiqCUCSZdUyqBLGrFUBECoRpgAiBaPhMjCGGFwvhIXQCmUiFEDYSAogSpAVgJQsr0JSAFaCooCBQXzVqkIGfAKMVatWLRdAUQA0tBBFQaE4shIQhxHJXqClhSBRuMViYNUIJRjeRw8gjCBkRQ5kB2zRwDwFEVGRBuRENQB0ZkRoxWocxwAAAABJRU5ErkJggg=="},"2a65":function(t,s,a){},"2affe":function(t,s,a){},5468:function(t,s,a){"use strict";a("2affe")},"5f01":function(t,s,a){"use strict";var i=function(){var t=this,s=t._self._c;return s("transition",{attrs:{name:"fade"}},[t.status?s("div",{staticClass:"mask"},[s("div",{staticClass:"modal"},[s("div",{staticClass:"body"},[s("div",{staticClass:"top"},[s("div",{staticClass:"btn_default",on:{click:t.cancel}},[t._v("取消")])]),s("div",{staticClass:"item"},[s("div",{staticClass:"captcha"},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.captcha.img,expression:"captcha.img"}],attrs:{src:t.captcha.img},on:{click:t.getCaptcha}})])]),s("div",{staticClass:"item"},[s("div",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.captcha,expression:"form.captcha"}],staticClass:"input-text",attrs:{type:"text",placeholder:"请输入图中字符"},domProps:{value:t.form.captcha},on:{input:function(s){s.target.composing||t.$set(t.form,"captcha",s.target.value)}}})])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"btn_primary",class:{active:t.form.captcha},on:{click:t.change}},[t._v(" 确认 ")])])])]):t._e()])},e=[],c={props:["status","reStatus"],data(){return{captcha:{key:null,img:null},form:{captcha:""}}},mounted(){this.getCaptcha()},watch:{reStatus(){this.form.captcha=null,this.getCaptcha()}},methods:{getCaptcha(){this.$api.Other.Captcha().then(t=>{this.captcha=t.data})},cancel(){this.$emit("cancel",!0)},change(){""!==this.form.captcha.trim()&&this.$emit("change",this.form.captcha,this.captcha)}}},o=c,r=(a("f0ca"),a("2877")),n=Object(r["a"])(o,i,e,!1,null,"22cab0f2",null);s["a"]=n.exports},"617f":function(t,s,a){},"8add":function(t,s,a){"use strict";var i=function(){var t=this,s=t._self._c;return t.status?s("div",{staticClass:"box"},[s("captcha-dialog",{attrs:{status:t.openmask,reStatus:t.reCaptcha},on:{change:t.sendSms,cancel:t.qx}}),s("div",{staticClass:"sms-login-form"},[s("div",{staticClass:"sms-login-title"},[t._v("输入短信验证码")]),s("div",{staticClass:"item"},[s("div",{staticClass:"text"},[t._v(" 验证码已发送至 "),s("span",{staticClass:"value"},[t._v(t._s(t.mobile))])]),s("div",{staticClass:"buttons"},[s("span",{staticClass:"send-sms-button",on:{click:function(s){return t.openDialog()}}},[t.sms.loading?[t._v(" "+t._s(t.sms.current)+"s ")]:[t._v("重新发送")]],2)])]),s("div",{staticClass:"item"},[s("div",{staticClass:"name"},[t._v("验证码")]),s("div",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sms,expression:"form.sms"}],staticClass:"input-text",attrs:{type:"number",placeholder:"请输入短信验证码"},domProps:{value:t.form.sms},on:{input:function(s){s.target.composing||t.$set(t.form,"sms",s.target.value)}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:t.form.sms,expression:"form.sms"}],staticStyle:{width:"16px",height:"16px"},attrs:{src:a("0e15")},on:{click:function(s){return t.clearSms()}}})])])]),s("div",{staticClass:"login-button-box"},[s("div",{staticClass:"btn-confirm",class:{active:t.form.sms},on:{click:t.confirm}},[t._v(" "+t._s(t.text)+" ")])])],1):t._e()},e=[],c=a("5f01"),o={components:{CaptchaDialog:c["a"]},props:["mobile","status","text","scene"],data(){return{interval:null,openmask:!1,captcha:{key:null,img:null},form:{sms:"",captcha:""},sms:{loading:!1,max:120,current:0},reCaptcha:!1}},beforeDestroy(){clearInterval(this.interval)},mounted(){this.sms.loading=!0,this.sms.current=this.sms.max,this.interval=setInterval(()=>{this.sms.current<=1?(this.sms.loading=!1,clearInterval(this.interval)):this.sms.current--},1e3)},methods:{goBack(){this.$emit("cancel",!0)},openDialog(){this.sms.loading||(this.form.captcha=null,this.openmask=!0)},qx(){this.openmask=!1},sendSms(t,s){this.form.captcha=t,this.captcha=s,this.$api.Other.SendSms({mobile:this.mobile,image_key:this.captcha.key,image_captcha:this.form.captcha,scene:this.scene}).then(()=>{this.sms.loading=!0,this.sms.current=this.sms.max,this.interval=setInterval(()=>{this.sms.current<=1?(this.sms.loading=!1,clearInterval(this.interval)):this.sms.current--},1e3),this.openmask=!1}).catch(t=>{this.reCaptcha=!this.reCaptcha,this.$message.error(t.message)})},getCaptcha(){this.$api.Other.Captcha().then(t=>{this.captcha=t.data})},clearSms(){this.form.sms=null},confirm(){""!==this.form.sms.trim()?this.$emit("change",this.form.sms):this.$message.error("请输入短信验证码")}}},r=o,n=(a("fe73"),a("2877")),m=Object(n["a"])(r,i,e,!1,null,"2c4375c0",null);s["a"]=m.exports},"8eb8":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("captcha-dialog",{attrs:{status:t.openmask,reStatus:t.reCaptcha},on:{change:t.sendSms,cancel:t.qx}}),s("div",{staticClass:"navheader borderbox",staticStyle:{"border-bottom":"none"}},[s("img",{staticClass:"back",attrs:{src:a("f508")},on:{click:function(s){return t.goBack()}}})]),t.verify||t.confirmDialog?!t.verify&&t.confirmDialog?[s("confirm-login",{attrs:{text:"绑定",scene:"mobile_bind",status:t.confirmDialog,mobile:t.user.mobile},on:{change:t.submit,cancel:t.cancel}})]:[s("newmobile",{attrs:{sign:t.sign}})]:[t.user?s("div",{staticClass:"group-form-box"},[s("div",{staticClass:"group-title"},[t._v("验证原手机号")]),s("div",{staticClass:"item"},[s("div",{staticClass:"mobile"},[s("span",{staticClass:"tit"},[t._v("原手机号")]),t._v(t._s(t.user.mobile)+" ")])])]):t._e(),s("div",{staticClass:"box pl-60 pr-60"},[s("div",{staticClass:"btn-confirm active",on:{click:t.openDialog}},[t._v("获取短信验证码")])])]],2)},e=[],c=a("2f62"),o=a("8add"),r=a("5f01"),n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"box"},[s("div",{staticClass:"group-form-box"},[s("div",{staticClass:"group-title"},[t._v("换绑手机号")]),s("div",{staticClass:"item"},[s("div",{staticClass:"name"},[t._v("新手机号")]),s("div",{staticClass:"value"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mobile,expression:"form.mobile"}],staticClass:"input",attrs:{type:"number",placeholder:"请输入新的手机号码"},domProps:{value:t.form.mobile},on:{input:function(s){s.target.composing||t.$set(t.form,"mobile",s.target.value)}}}),s("img",{directives:[{name:"show",rawName:"v-show",value:t.form.mobile,expression:"form.mobile"}],staticStyle:{width:"16px",height:"16px"},attrs:{src:a("0e15")},on:{click:function(s){return t.clearMobile()}}})])]),s("div",{staticClass:"item"},[s("div",{staticClass:"name"},[t._v("验证码")]),s("div",{staticClass:"value"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.captcha,expression:"form.captcha"}],staticClass:"input-text",attrs:{type:"text",placeholder:"请输入图形验证码"},domProps:{value:t.form.captcha},on:{input:function(s){s.target.composing||t.$set(t.form,"captcha",s.target.value)}}})]),s("div",{staticClass:"captcha",on:{click:t.getCaptcha}},[s("img",{directives:[{name:"show",rawName:"v-show",value:t.captcha.img,expression:"captcha.img"}],staticStyle:{width:"100px",height:"36px"},attrs:{src:t.captcha.img}})])]),s("div",{staticClass:"item"},[s("div",{staticClass:"name"},[t._v("验证码")]),s("div",{staticClass:"value"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sms,expression:"form.sms"}],staticClass:"input-text",attrs:{type:"number",placeholder:"请输入短信验证码"},domProps:{value:t.form.sms},on:{input:function(s){s.target.composing||t.$set(t.form,"sms",s.target.value)}}})]),s("div",{staticClass:"buttons"},[s("span",{staticClass:"send-sms-button",on:{click:t.sendSms}},[t.sms.loading?[t._v(t._s(t.sms.current)+"s")]:[t._v("获取验证码")]],2)])])]),s("div",{staticClass:"box pl-60 pr-60"},[s("div",{staticClass:"btn-confirm",class:{active:t.form.captcha&&t.form.sms&&t.form.mobile},on:{click:t.submit}},[t._v(" 立即绑定 ")])])])},m=[],l={props:["sign"],data(){return{interval:null,captcha:{img:null,key:null},form:{mobile:"",sms:"",captcha:""},sms:{max:120,current:0,loading:!1}}},beforeDestroy(){clearInterval(this.interval)},mounted(){this.getCaptcha()},methods:{getCaptcha(){this.$api.Other.Captcha().then(t=>{this.captcha=t.data})},clearMobile(){this.form.mobile=null},sendSms(){this.sms.loading||(this.form.mobile?this.$utils.isChinaMobilePhone(this.form.mobile)?this.form.captcha?this.$api.Other.SendSms({mobile:this.form.mobile,image_key:this.captcha.key,image_captcha:this.form.captcha,scene:"mobile_bind"}).then(()=>{this.sms.loading=this,this.sms.current=this.sms.max,this.interval=setInterval(()=>{this.sms.current<=1?(this.sms.loading=!1,clearInterval(this.interval)):this.sms.current--},1e3)}).catch(t=>{this.form.captcha=null,this.getCaptcha(),this.$message.error(t.message)}):this.$message.error("请输入图形验证码"):this.$message.error("请输入正确的手机号"):this.$message.error("请输入新手机号"))},submit(){""!==this.form.mobile.trim()&&""!==this.form.sms.trim()&&(this.$utils.isChinaMobilePhone(this.form.mobile)?this.$api.Member.MobileChange({mobile:this.form.mobile,mobile_code:this.form.sms,sign:this.sign}).then(()=>{this.$message.success("成功"),setTimeout(()=>{this.$router.back()},500)}).catch(t=>{this.$message.error(t.message)}):this.$message.error("请输入正确的手机号"))}}},h=l,p=(a("d495"),a("2877")),u=Object(p["a"])(h,n,m,!1,null,"91a0e744",null),g=u.exports,A={components:{ConfirmLogin:o["a"],Newmobile:g,CaptchaDialog:r["a"]},data(){return{loading:!1,verify:!1,confirmDialog:!1,sign:null,captcha:{img:null,key:null},form:{sms:"",captcha:""},sms:{max:120,current:0,loading:!1},openmask:!1,reCaptcha:!1}},computed:{...Object(c["c"])(["user"])},mounted(){},methods:{openDialog(){this.sms.loading||(this.$utils.isChinaMobilePhone(this.user.mobile)?(this.form.captcha=null,this.openmask=!0):this.$message.error("请输入正确的手机号"))},qx(){this.openmask=!1},sendSms(t,s){this.loading||(this.loading=!0,this.form.captcha=t,this.captcha=s,this.$api.Other.SendSms({mobile:this.user.mobile,image_key:this.captcha.key,image_captcha:this.form.captcha,scene:"mobile_bind"}).then(t=>{this.loading=!1,this.openmask=!1,this.confirmDialog=!0}).catch(t=>{this.loading=!1,this.reCaptcha=!this.reCaptcha,this.$message.error(t.message)}))},cancel(){this.confirmDialog=!1},submit(t){this.loading||(this.loading=!0,this.form.sms=t,this.$api.Member.MobileVerify({mobile:this.user.mobile,mobile_code:this.form.sms}).then(t=>{this.loading=!1,this.sign=t.data.sign,this.$message.success("成功"),setTimeout(()=>{this.verify=!0},500)}).catch(t=>{this.loading=!1,this.$message.error(t.message)}))}}},d=A,v=(a("5468"),Object(p["a"])(d,i,e,!1,null,"71f6a206",null));s["default"]=v.exports},d495:function(t,s,a){"use strict";a("2a65")},d8e2:function(t,s,a){},f0ca:function(t,s,a){"use strict";a("d8e2")},f508:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAAEi6oPRAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACz+WTVAAADyUlEQVR4Ae2cPa4TMRCAXxIkoERCAgk6ChSlgSNQAKJCQkrCAZCQKDlBWm7wKF6fn4bQ8Ro4Ak1ugKCDEoSUhJlHRjIre3dsz2zsxSs9Nrv2zH7+1tn1/oSTk5hpOp2+qo0fj8d7nQr92rSuwkYeCmRXpIAW5o1MwRX+Q5mO/YUKGzU6Yi9WdyBBtXnRTcovYZW4A8uwF9+6mtFzFVTXTyaTn/v9/gqsv7xarX5Xy1kHEkrS7/cf25Jg0kYiM8lisTivktBybSJukloinyTORL5JMJFVNu6dXq/3q84JBpuTNRHuHUyGZGblus9O2TBQeLTb7T4g2XK5vFqXBMucibDQJ1ltIp9kjYm4yayyMdiccO/RDoAv7j2zrHzO1wCrF4U0j44fGDsYDG7N5/OvnDyXOJV86hAIHDouwrAXc2EwQMwQgRA8gvgcFCkuGkgKJBpIGiQYSAvEGwhAvkNHvUaBoX2E4l1z1jEfg+H8+NxMAnBrc1nqs3enpnMuAXBP5FS/ae4NRAm1wIKBtMCigaTBxICkwMSBbGBwwaK2HdpemRcDxQDXgNrXES687gLEm9Fo9Gw2m+24QOJjatyweZ7bbDZbWMVuOHv4wW2hCXOI+cKNxXpsck7SKkzI0EQMSAJGzJAUjAiQJEw0kDRMFJAGTDCQFkwQkCaMN5A2jBdQGzBsIDhR3oTK3zAAp5Aj8N/I5n9Z5zK4jn9qpgKgf5bNstjP7FOH9l0PaggbCAPagPICagPKG0gbKghIEyoYSAsqCkgDKhpIGkoESBJKDEgKShTIBgUPXh7As45PWMaZWOcyTiKqg49W8eRLy9vt9iN95szFgXCjh+e99BD5jANS6hQDxUAxUAwUA10wID700JZyuL/wDrZjvqx1Bo+/XmhsOxtBKAafysMfvgVpm+6DpM+2gph1Kg8VYoCqsSQGXvOzisFxKdyXeQIDZHE5yJJsDyIxrh6DYvAGVcjLSdWdULecnKBUxJC0ZASlJiYZQamKObqg1MUcTVAuYloXlJuY1gTlKkZdUO5i1ATB48+HMIB7f+wBHjUwdi46DoJe8xIuCU5tUG2NfG3bjlknepsc5KxBxA8bEPYo+FvjV89Wnuo60R5EjezK8QfboyKoS6JUBXVBVCuCchbVqqAcRR1FUE6ijiooB1FJCEpZVFKCUhSVpKCURCUtiCsK6uHPQ+64/rMPyhMyF70WCwHgxOCjHXwNCn9fjBe9lpjb8PLYdcv66FVZ9KBqKw8/vXoN62+AtPPhcHjq8xOsar6yXAwUA8VAqgb+AEqzClcpkwbAAAAAAElFTkSuQmCC"},fe73:function(t,s,a){"use strict";a("617f")}}]);