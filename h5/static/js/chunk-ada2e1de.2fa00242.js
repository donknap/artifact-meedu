(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ada2e1de"],{"04b3":function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IArs4c6QAAAchQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////tXQcBAAAAJd0Uk5TAAECAwQFBggJCgwNDg8QEhMUFRYXGRweICMlJikrLC8xMzU5PkFDREVGR0tNTk9QUVRVVldaXF1lZmdoaWprbG1wcXJzdHV2eHp+f4GDhIWIiouMjo+RkpWdn6Cio6Slpqepra6ws7W2t7/Aw8TIysvMzs/S09TV1tfa29zd3t/g4ubn6ers7e7v8PHy8/T1+Pn6+/z9/ujqRdkAAAKlSURBVEjHjVZZWxNBECwOwaiILIqoqEEloCiKBx544LHiRUQlxit4I6IQgsYYEBJRs0RwIRJTf9eHTbK7s5Ms89RdU/V9M9093QOIq2Lv+YfvJr5+mRx9dKm1Gi6rsv1JipaVftZZWYZec3ba4C3Ew+G4ZtizfTWl+IdnSDLi9ymGr/j8EZJMdEvpdc9J6oEWO9oS0Em+bnDyd8+R2aBkoyGYJZOtItyWJmNe+VG9MXL5kB07oJPDnlKX84TIlU4rsmeJHCwX7kFS32e69d9c+MAgOd9Y9F6SIbeUhsjRirx9jIx53ASeGHk6n99ZZr1wXd4s5zcCAPrIYB48eL9J5B0f2Jy3guQNAKico57PV/UyE812vpqjv5BBnT9qARwhA4XtSQoKNUeeLDgBw35BFutHidoVao7sN+uKHAFqlhgxGXaFnQ9EuOLBfhYPKSpEPvxkB1TSB6nCwYePvI3HpGJDlc+GQs2R1+0hU8hX+EBNiLyhkPABjVOIMQ6JIiXjI84kEgxDppDxEWYa3yUC3CGpNcsEmuxIUEmSyWbJkeYx7rg0VJIDUZlC4yc8FcMKlWQ/FIlCId/ippC4PN9ZV0bi7qLNXhpFvkzhJ7uwfsVafLZ6cCgiXK0HRizlLdSDoGghxwCcsjygy0J+lSiZaLI8oHMAan8Wn2hVRsyvEiXvmU90cQMA3DKbwJu/V8QqCS93mE3A0Nb9MtuMZERVm21mcYth9q61kV0rDLaxNbTKYXKyquBs19bSjH/vtIyTjHu7z3ZZgZ4sGSo9UIbJ3Bk71rNafmRle0W0faHcUFw66tzYMV567E7tkn4brqblg/1P/7oSl2t4sGh8FzTL10Ef2lYmfJsufvxn/ZzkJi7Uu6V0a/fQ6HQqk0nNvA+caHRs/wdINjkvBJWxYAAAAABJRU5ErkJggg=="},"1a49":function(s,t,i){"use strict";i("7cc6")},"54d4":function(s,t,i){"use strict";i.r(t);var e=function(){var s=this,t=s._self._c;return s.user?t("div",{staticClass:"container"},[s.openmask?t("div",{staticClass:"mask"},[s.changeNick?t("div",{staticClass:"popup borderbox"},[t("div",{staticClass:"cancel",on:{click:function(t){return s.cancel()}}},[t("img",{attrs:{src:i("04b3")}})]),t("div",{staticClass:"input-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.form.content,expression:"form.content"}],staticClass:"input-item",attrs:{type:"text",placeholder:"请输入昵称"},domProps:{value:s.form.content},on:{input:function(t){t.target.composing||s.$set(s.form,"content",t.target.value)}}})]),t("div",{staticClass:"confirm",on:{click:function(t){return s.submitHandle()}}},[s._v("确认")])]):s._e(),s.dialog?t("div",{staticClass:"popup borderbox"},[t("div",{staticClass:"cancel",on:{click:function(t){return s.cancel()}}},[t("img",{attrs:{src:i("04b3")}})]),t("div",{staticClass:"text"},["qq"===s.resource?[s._v("是否解除绑定QQ？")]:[s._v("是否解除绑定微信？")]],2),t("div",{staticClass:"confirm",on:{click:function(t){return s.cancelBind()}}},[s._v("确认")])]):s._e(),s.destroyDialog?t("div",{staticClass:"popup borderbox"},[t("div",{staticClass:"cancel",on:{click:function(t){return s.cancel()}}},[t("img",{attrs:{src:i("04b3")}})]),t("div",{staticClass:"text"},[s._v(" 确认注销账号？确认之后账号将在7天后自动注销，期间内登录账号将会自动取消账号注销。 ")]),t("div",{staticClass:"confirm",on:{click:function(t){return s.destroyUserValidate()}}},[s._v("确认")])]):s._e(),s.logoutDialog?t("div",{staticClass:"popup borderbox"},[t("div",{staticClass:"cancel",on:{click:function(t){return s.cancel()}}},[t("img",{attrs:{src:i("04b3")}})]),t("div",{staticClass:"text"},[s._v(" 确认安全退出登录？ ")]),t("div",{staticClass:"confirm",on:{click:function(t){return s.goLogout()}}},[s._v("确认")])]):s._e()]):s._e(),t("div",{staticClass:"navheader borderbox"},[t("img",{staticClass:"back",attrs:{src:i("f508")},on:{click:function(t){return s.goBack()}}}),t("div",{staticClass:"title"},[s._v("个人中心")])]),t("div",{staticClass:"user-avatar"},[t("div",{staticClass:"value"},[t("img",{attrs:{src:s.user.avatar}}),t("input",{staticClass:"input-avatar",attrs:{type:"file",accept:"image/*"},on:{change:s.uploadAvatar}})]),t("div",{staticClass:"name"},[s._v("点击更换头像")])]),t("div",{staticClass:"form-box"},[t("div",{staticClass:"tit"},[s._v("账户信息")]),t("div",{staticClass:"group-item",on:{click:s.changeNickname}},[t("div",{staticClass:"name"},[s._v("昵称")]),t("div",{staticClass:"value"},[t("span",[s._v(s._s(s.user.nick_name))]),t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])]),s.config&&1===s.config.socialites.wechat_oauth&&s.isInH5Wechat?t("div",{staticClass:"group-item"},[t("div",{staticClass:"name"},[s._v("绑定微信")]),t("div",{staticClass:"value",on:{click:s.bindWechat}},[1===s.user.is_bind_wechat?t("span",[s._v("已绑定")]):t("span",{staticClass:"un"},[s._v("点击绑定")]),t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])]):s._e(),s.config&&1===s.config.socialites.qq&&!s.isInH5Wechat?t("div",{staticClass:"group-item"},[t("div",{staticClass:"name"},[s._v("绑定QQ")]),t("div",{staticClass:"value",on:{click:s.bindQQ}},[1===s.user.is_bind_qq?t("span",[s._v("已绑定")]):t("span",{staticClass:"un"},[s._v("点击绑定")]),t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])]):s._e(),t("div",{staticClass:"group-item"},[t("div",{staticClass:"name"},[s._v("绑定手机号")]),t("div",{staticClass:"value"},[1===s.user.is_bind_mobile?t("span",{on:{click:s.changeMobile}},[s._v(s._s(s.user.mobile.substr(0,3)+"****"+s.user.mobile.substr(7)))]):t("span",{staticClass:"un",on:{click:s.bindMobile}},[s._v("点击绑定")]),t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])]),t("div",{staticClass:"group-item"},[t("div",{staticClass:"name"},[s._v("实名认证")]),t("div",{staticClass:"value"},[!0===s.user.is_face_verify?t("span",{on:{click:s.goLocalFaceCheck}},[s._v("已认证")]):t("span",{staticClass:"un",on:{click:s.goFaceVerify}},[s._v("未认证")]),t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])]),t("div",{staticClass:"group-item",on:{click:s.changePassword}},[t("div",{staticClass:"name"},[s._v("修改密码")]),t("div",{staticClass:"value"},[1===s.user.is_password_set?t("span",[s._v("已设置")]):t("span",{staticClass:"un"},[s._v("设置密码")]),t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])]),t("div",{staticClass:"group-item",on:{click:s.destroyUser}},[t("div",{staticClass:"name"},[s._v("账号注销")]),s._m(0)]),t("div",{staticClass:"group-item",on:{click:s.openLogoutDialog}},[t("div",{staticClass:"name"},[s._v("退出登录")]),s._m(1)])])]):s._e()},a=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"value"},[t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"value"},[t("img",{staticClass:"arrow",attrs:{src:i("7e53")}})])}],o=(i("14d9"),i("2f62")),c={computed:{...Object(o["c"])(["isLogin","config","user"]),isInH5Wechat(){return this.$utils.isWechat()}},data(){return{list:[],openmask:!1,changeNick:!1,dialog:!1,error:this.$route.query.error,loading:!1,profile:[],scene:null,form:{nick_name:null,content:null},resource:null,destroyDialog:!1,logoutDialog:!1,verifyLoading:!1}},mounted(){this.$router.onReady(()=>{this.$route.query.login_code&&"bind"===this.$route.query.action&&this.CodeBind(this.$route.query.login_code),this.$route.query.login_err_msg&&this.$message.error(this.$route.query.login_err_msg),this.error&&this.$message.error(this.error),this.getProfile(),this.getData()})},methods:{...Object(o["b"])(["submitLogin","logout"]),getProfile(){this.$api.Member.Profile().then(s=>{this.profile=s.data})},getData(){this.$api.User.Detail().then(s=>{this.submitLogin(s.data)})},uploadAvatar(s){let t=s.target.files;if(!t[0].type.match(/.jpg|.png|.jpeg/i))return void this.$message.error("图片格式错误,请上传png/jpg/jpeg格式的图片");if(t[0].size>2048e3)return void this.$message.error("图片大小不超过2M");let i=new FormData;i.append("file",t[0]),this.$api.Member.UploadAvatar(i).then(s=>{0===s.code?(this.$message.success("上传头像成功"),this.getData()):this.$message.error(s.data.message)})},changeNickname(){1!==this.user.is_set_nickname?(this.changeNick=!0,this.openmask=!0):this.$message.error("您已经设置过昵称了哦")},cancel(){this.logoutDialog=!1,this.destroyDialog=!1,this.dialog=!1,this.changeNick=!1,this.openmask=!1,this.resource=null},bindWechat(){if(1===this.user.is_bind_wechat)return this.dialog=!0,this.openmask=!0,void(this.resource="wechat");let s=window.location.href,t=encodeURIComponent(s);window.location.href=this.config.url+"/api/v3/auth/login/wechat/oauth?s_url="+t+"&f_url="+t+"&action=bind"},goFaceVerify(){if(this.verifyLoading)return;this.verifyLoading=!0;let s=this.$utils.getHost()+"/auth/faceSuccess";this.$api.Member.TecentFaceVerify({s_url:s}).then(s=>{this.$utils.saveBizToken(s.data.biz_token),this.$utils.saveRuleId(s.data.rule_id),this.verifyLoading=!1,window.location.href=s.data.url}).catch(s=>{this.$message.error(s.message||"无法发起实名认证")})},goLocalFaceCheck(){this.$router.push({name:"FaceSuccesss"})},bindQQ(){if(1===this.user.is_bind_qq)return this.dialog=!0,this.openmask=!0,void(this.resource="qq");let s=window.location.href,t=encodeURIComponent(s);window.location.href=this.config.url+"/api/v3/auth/login/socialite/qq?s_url="+t+"&f_url="+t+"&action=bind"},CodeBind(s){this.$utils.getSessionLoginCode(s)||(this.$utils.saveSessionLoginCode(s),this.$api.Auth.CodeBind({code:s}).then(s=>{this.$message.success("绑定成功"),this.cancel(),this.getData()}).catch(s=>{this.$message.error(s.message)}))},cancelBind(){this.$api.Member.CancelBind(this.resource).then(s=>{this.$message.success("解绑成功"),this.cancel(),this.getData()})},getCaptcha(){this.$api.Other.Captcha().then(s=>{this.captcha=s.data})},changeMobile(){this.$router.push({name:"MobileVerify"})},bindMobile(){this.$router.push({name:"ChangeMobile"})},changePassword(){1===this.user.is_bind_mobile?this.$router.push({name:"ChangePassword"}):this.$message.error("请绑定手机号")},submitHandle(){this.loading||(this.form.content?(this.loading=!0,this.$api.Member.NicknameChange({nick_name:this.form.content}).then(()=>{this.loading=!1,this.$message.success("修改成功"),this.form.content=null,this.cancel(),setTimeout(()=>{this.getData()},500)}).catch(s=>{this.loading=!1,this.$message.error(s.message)})):this.$message.error("请输入昵称"))},destroyUser(){this.destroyDialog=!0,this.openmask=!0},destroyUserValidate(){this.$api.Auth.DestroyUser().then(s=>{this.$message.success("注销成功"),this.cancel(),this.logout(),this.$router.push({name:"Me"})}).catch(s=>{this.$message.error(s.message)})},openLogoutDialog(){this.logoutDialog=!0,this.openmask=!0},goLogout(){this.$message.success("已安全退出"),this.cancel(),this.logout(),this.$router.push({name:"Me"})}}},r=c,n=(i("1a49"),i("2877")),l=Object(n["a"])(r,e,a,!1,null,"06504214",null);t["default"]=l.exports},"7cc6":function(s,t,i){},"7e53":function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAAXNSR0IArs4c6QAAABhQTFRFAAAAVVVqU1NmVFRlVVVoVFRlVlZmVFRlG3nk1wAAAAh0Uk5TAAwoTGBqp/7DnkYGAAAAMUlEQVQY02NgwAcYFZA4bKVIHJbyACReOLIUKzWkinFwUJQhG0C6BIoXUDyH4m3sAAB9Dw3zXk/VOQAAAABJRU5ErkJggg=="},f508:function(s,t){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAAEi6oPRAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACz+WTVAAADyUlEQVR4Ae2cPa4TMRCAXxIkoERCAgk6ChSlgSNQAKJCQkrCAZCQKDlBWm7wKF6fn4bQ8Ro4Ak1ugKCDEoSUhJlHRjIre3dsz2zsxSs9Nrv2zH7+1tn1/oSTk5hpOp2+qo0fj8d7nQr92rSuwkYeCmRXpIAW5o1MwRX+Q5mO/YUKGzU6Yi9WdyBBtXnRTcovYZW4A8uwF9+6mtFzFVTXTyaTn/v9/gqsv7xarX5Xy1kHEkrS7/cf25Jg0kYiM8lisTivktBybSJukloinyTORL5JMJFVNu6dXq/3q84JBpuTNRHuHUyGZGblus9O2TBQeLTb7T4g2XK5vFqXBMucibDQJ1ltIp9kjYm4yayyMdiccO/RDoAv7j2zrHzO1wCrF4U0j44fGDsYDG7N5/OvnDyXOJV86hAIHDouwrAXc2EwQMwQgRA8gvgcFCkuGkgKJBpIGiQYSAvEGwhAvkNHvUaBoX2E4l1z1jEfg+H8+NxMAnBrc1nqs3enpnMuAXBP5FS/ae4NRAm1wIKBtMCigaTBxICkwMSBbGBwwaK2HdpemRcDxQDXgNrXES687gLEm9Fo9Gw2m+24QOJjatyweZ7bbDZbWMVuOHv4wW2hCXOI+cKNxXpsck7SKkzI0EQMSAJGzJAUjAiQJEw0kDRMFJAGTDCQFkwQkCaMN5A2jBdQGzBsIDhR3oTK3zAAp5Aj8N/I5n9Z5zK4jn9qpgKgf5bNstjP7FOH9l0PaggbCAPagPICagPKG0gbKghIEyoYSAsqCkgDKhpIGkoESBJKDEgKShTIBgUPXh7As45PWMaZWOcyTiKqg49W8eRLy9vt9iN95szFgXCjh+e99BD5jANS6hQDxUAxUAwUA10wID700JZyuL/wDrZjvqx1Bo+/XmhsOxtBKAafysMfvgVpm+6DpM+2gph1Kg8VYoCqsSQGXvOzisFxKdyXeQIDZHE5yJJsDyIxrh6DYvAGVcjLSdWdULecnKBUxJC0ZASlJiYZQamKObqg1MUcTVAuYloXlJuY1gTlKkZdUO5i1ATB48+HMIB7f+wBHjUwdi46DoJe8xIuCU5tUG2NfG3bjlknepsc5KxBxA8bEPYo+FvjV89Wnuo60R5EjezK8QfboyKoS6JUBXVBVCuCchbVqqAcRR1FUE6ijiooB1FJCEpZVFKCUhSVpKCURCUtiCsK6uHPQ+64/rMPyhMyF70WCwHgxOCjHXwNCn9fjBe9lpjb8PLYdcv66FVZ9KBqKw8/vXoN62+AtPPhcHjq8xOsar6yXAwUA8VAqgb+AEqzClcpkwbAAAAAAElFTkSuQmCC"}}]);