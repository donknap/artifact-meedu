import{u as B,r as a,t as M,j as e,B as h,d as z,h as A,E as F,m as L,M as Y}from"./index-e664e6dc.js";import{i as I,j as R}from"./topic-b9592fd8.js";import{B as H}from"./index-6997ccbf.js";import{T as K}from"./Table-ee9d831a.js";import{D as O}from"./index-011730db.js";import"./LeftOutlined-feda539a.js";import"./addEventListener-263e58b1.js";import"./useIcons-0af35028.js";import"./CheckOutlined-f7d7f4b2.js";import"./Pagination-2f0e5cb7.js";import"./useForceUpdate-932ad153.js";import"./responsiveObserver-8e0341fc.js";import"./index-640f3908.js";import"./index-fa5b0e30.js";import"./iconUtil-a09ccdfb.js";const{confirm:U}=Y,{RangePicker:q}=O,ce=()=>{const f=B(),[c,i]=a.useState(!1),[j,o]=a.useState([]),[l,n]=a.useState(1),[d,u]=a.useState(10),[g,C]=a.useState(0),[r,m]=a.useState(!1),[S,v]=a.useState(""),[N,p]=a.useState([]),[k,x]=a.useState([]);a.useEffect(()=>{document.title="图文文章评论",f(M("图文文章评论"))},[]),a.useEffect(()=>{_()},[l,d,r]);const _=()=>{c||(i(!0),I({page:l,size:d,user_id:S,topic_id:null,created_at:N}).then(t=>{o(t.data.data.data),C(t.data.data.total),i(!1)}).catch(t=>{i(!1)}))},D=t=>{t!==0&&U({title:"操作确认",icon:e.jsx(F,{}),content:"确认删除选中的评论？",centered:!0,okText:"确认",cancelText:"取消",onOk(){c||(i(!0),R(t).then(()=>{i(!1),L.success("成功"),w()}).catch(s=>{i(!1)}))},onCancel(){console.log("Cancel")}})},y=()=>{n(1),u(10),o([]),v(""),x([]),p([]),m(!r)},w=()=>{n(1),o([]),m(!r)},T={current:l,pageSize:d,total:g,onChange:(t,s)=>E(t,s),showSizeChanger:!0},E=(t,s)=>{n(t),u(s)},P=[{title:"学员",width:300,render:(t,s)=>e.jsxs(e.Fragment,{children:[s.user&&e.jsxs("div",{className:"user-item d-flex",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:s.user.avatar,width:"40",height:"40"})}),e.jsx("div",{className:"ml-10",children:s.user.nick_name})]}),!s.user&&e.jsx("span",{className:"c-red",children:"学员不存在"})]})},{title:"图文",width:400,render:(t,s)=>e.jsx(e.Fragment,{children:s.topic&&e.jsx("span",{children:s.topic.title})})},{title:"评论内容",render:(t,s)=>e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})},{title:"时间",width:200,dataIndex:"updated_at",render:t=>e.jsx("span",{children:z(t)})},{title:"操作",width:80,fixed:"right",render:(t,s)=>e.jsx(h,{type:"link",className:"c-red",onClick:()=>{D(s.id)},children:"删除"})}],b=t=>t&&t>=A().add(0,"days");return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(H,{title:"图文文章评论"}),e.jsxs("div",{className:"float-left j-b-flex mb-30 mt-30",children:[e.jsx("div",{className:"d-flex"}),e.jsxs("div",{className:"d-flex",children:[e.jsx(q,{disabledDate:b,format:"YYYY-MM-DD",value:k,onChange:(t,s)=>{s[1]+=" 23:59:59",p(s),x(t)},placeholder:["评论时间-开始","评论时间-结束"]}),e.jsx(h,{className:"ml-10",onClick:y,children:"清空"}),e.jsx(h,{className:"ml-10",type:"primary",onClick:()=>{n(1),m(!r)},children:"筛选"})]})]}),e.jsx("div",{className:"float-left",children:e.jsx(K,{loading:c,columns:P,dataSource:j,rowKey:t=>t.id,pagination:T})})]})};export{ce as default};
