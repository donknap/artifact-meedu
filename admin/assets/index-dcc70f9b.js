import{u as b,b as P,r as a,t as _,j as s,S as E,E as M,m as R,M as T}from"./index-e664e6dc.js";import{l as W,d as z}from"./wechat-5e5f70bc.js";import{P as i}from"./index-0c53b4ac.js";import{O as D}from"./index-33d5723a.js";import{T as I}from"./Table-ee9d831a.js";import"./icon-option-c9fff0bb.js";import"./addEventListener-263e58b1.js";import"./useIcons-0af35028.js";import"./CheckOutlined-f7d7f4b2.js";import"./Pagination-2f0e5cb7.js";import"./LeftOutlined-feda539a.js";import"./useForceUpdate-932ad153.js";import"./responsiveObserver-8e0341fc.js";import"./index-640f3908.js";import"./index-fa5b0e30.js";import"./iconUtil-a09ccdfb.js";const{confirm:N}=T,Z=()=>{const u=b(),l=P(),[o,n]=a.useState(!1),[h,c]=a.useState([]),[r,p]=a.useState(1),[d,x]=a.useState(10),[f,y]=a.useState(0),[m,g]=a.useState(!1);a.useEffect(()=>{document.title="公众号",u(_("公众号"))},[]),a.useEffect(()=>{j()},[r,d,m]);const j=()=>{o||(n(!0),W().then(e=>{c(e.data.data.data),y(e.data.data.total),n(!1)}).catch(e=>{n(!1)}))},S=[{title:"ID",width:120,render:(e,t)=>s.jsx("span",{children:t.id})},{title:"匹配规则",width:500,dataIndex:"name",render:(e,t)=>s.jsxs(s.Fragment,{children:[t.type==="event"&&s.jsxs("span",{children:[t.type,"@",t.event_type,":",t.event_key]}),t.type!=="event"&&s.jsxs("span",{children:[t.type,"@",t.rule]})]})},{title:"回复内容",dataIndex:"reply_content",render:e=>s.jsx("span",{children:e})},{title:"操作",width:130,render:(e,t)=>s.jsxs(E,{children:[s.jsx(i,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"mpWechatMessageReply.update",onClick:()=>{l("/wechat/messagereply/update?id="+t.id)},disabled:null}),s.jsx(i,{type:"link",text:"删除",class:"c-red",icon:null,p:"mpWechatMessageReply.destroy",onClick:()=>{v(t.id)},disabled:null})]})}],C=()=>{p(1),c([]),g(!m)},v=e=>{e!==0&&N({title:"操作确认",icon:s.jsx(M,{}),content:"确认删除此VIP？",centered:!0,okText:"确认",cancelText:"取消",onOk(){o||(n(!0),z(e).then(()=>{n(!1),R.success("删除成功"),C()}).catch(t=>{n(!1)}))},onCancel(){console.log("Cancel")}})},w={current:r,pageSize:d,total:f,onChange:(e,t)=>k(e,t),showSizeChanger:!0},k=(e,t)=>{p(e),x(t)};return s.jsxs("div",{className:"meedu-main-body",children:[s.jsxs("div",{className:"float-left mb-30",children:[s.jsx(i,{type:"primary",text:"新建自动回复",class:"",icon:null,p:"mpWechatMessageReply.store",onClick:()=>l("/wechat/messagereply/create"),disabled:null}),s.jsx(i,{type:"primary",text:"公众号菜单",class:"ml-10",icon:null,p:"mpWechat.menu",onClick:()=>l("/wechat/mp-wechat-menu"),disabled:null}),s.jsx(D,{text:"公众号配置",value:"/system/mp_wechatConfig"})]}),s.jsx("div",{className:"float-left",children:s.jsx(I,{loading:o,columns:S,dataSource:h,rowKey:e=>e.id,pagination:w})})]})};export{Z as default};
