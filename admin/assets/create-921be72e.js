import{u as _,b as I,r,t as F,j as e,B as d,I as o,S as h,m as N}from"./index-e664e6dc.js";import{s as q}from"./multi-share-6acf2d4c.js";import{B}from"./index-6997ccbf.js";import{H as x}from"./index-aa5ba88b.js";import{U as R}from"./index-8bc536fa.js";import{S as k}from"./index-1b1214fa.js";import{F as s}from"./index-279b9278.js";import{R as T,C as g}from"./row-2dac17a4.js";import"./LeftOutlined-feda539a.js";import"./InfoCircleOutlined-e72834c1.js";import"./InboxOutlined-6e2e7513.js";import"./selected-33965347.js";import"./Dragger-53e4e55c.js";import"./useForceUpdate-932ad153.js";import"./DeleteOutlined-50171d48.js";import"./CheckOutlined-f7d7f4b2.js";import"./useIcons-0af35028.js";import"./Pagination-2f0e5cb7.js";import"./responsiveObserver-8e0341fc.js";import"./index-640f3908.js";import"./course-a9e2e142.js";import"./Table-ee9d831a.js";import"./addEventListener-263e58b1.js";import"./index-fa5b0e30.js";import"./iconUtil-a09ccdfb.js";import"./live-f6850866.js";import"./role-ca0eb4dd.js";import"./book-7a089476.js";import"./path-d70a04d0.js";import"./topic-b9592fd8.js";import"./paper-f0c62327.js";import"./practice-47d493a3.js";import"./mock-942c1c73.js";import"./index-54aec4fc.js";import"./PlusOutlined-4cee6348.js";const xe=()=>{const[a]=s.useForm(),j=_(),c=I(),[i,l]=r.useState(!1),[p,u]=r.useState(""),[m,b]=r.useState(""),[f,y]=r.useState(""),[w,n]=r.useState(!1);r.useEffect(()=>{document.title="新建分销活动",j(F("新建分销活动"))},[]);const S=t=>{i||(l(!0),t.goods_type=f,q(t).then(v=>{l(!1),N.success("保存成功！"),c(-1)}).catch(v=>{l(!1)}))},C=t=>{console.log("Failed:",t)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(B,{title:"新建分销活动"}),e.jsx(k,{open:w,enabledResource:"vod,live,book,topic,paper,practice,learnPath,vip",onCancel:()=>n(!1),onSelected:t=>{a.setFieldsValue({goods_id:t.id,goods_title:t.title,goods_charge:t.original_charge,goods_thumb:t.thumb}),b(t.title),u(t.thumb),y(t.resource_type),n(!1)}}),e.jsx("div",{className:"float-left mt-30",children:e.jsxs(s,{form:a,name:"multiShare-create",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:S,onFinishFailed:C,autoComplete:"off",children:[e.jsx(s.Item,{label:"课程",name:"goods_id",rules:[{required:!0,message:"请选择课程!"}],children:e.jsxs(d,{loading:i,type:"primary",onClick:()=>n(!0),children:[m&&e.jsxs("span",{children:["已选择课程「",m,"」"]}),!m&&e.jsx("span",{children:"选择课程"})]})}),e.jsx(s.Item,{label:"商品名",name:"goods_title",rules:[{required:!0,message:"请输入商品名!"}],children:e.jsx(o,{style:{width:300},placeholder:"请输入商品名",allowClear:!0})}),e.jsx(s.Item,{label:"商品价格",name:"goods_charge",rules:[{required:!0,message:"请输入商品价格!"}],children:e.jsx(o,{type:"number",style:{width:300},placeholder:"单位：元",allowClear:!0})}),e.jsx(s.Item,{label:"商品封面",name:"goods_thumb",rules:[{required:!0,message:"请上传商品封面!"}],children:e.jsx(R,{text:"上传图片",onSelected:t=>{a.setFieldsValue({goods_thumb:t}),u(t)}})}),p&&e.jsxs(T,{style:{marginBottom:22},children:[e.jsx(g,{span:3}),e.jsx(g,{span:21,children:e.jsx("div",{className:"normal-thumb-box",style:{backgroundImage:`url(${p})`,width:120,height:90}})})]}),e.jsx(s.Item,{label:"一级奖励",name:"reward",rules:[{required:!0,message:"请输入一级分销奖励!"}],children:e.jsxs(h,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"reward",rules:[{required:!0,message:"请输入一级分销奖励!"}],children:e.jsx(o,{style:{width:300},placeholder:"请输入一级分销奖励",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(x,{text:"最小单位：元。不支持小数。"})})]})}),e.jsx(s.Item,{label:"二级奖励",name:"reward2",rules:[{required:!0,message:"请输入二级分销奖励!"}],children:e.jsxs(h,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"reward2",rules:[{required:!0,message:"请输入二级分销奖励!"}],children:e.jsx(o,{style:{width:300},placeholder:"请输入二级分销奖励",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(x,{text:"最小单位：元。不支持小数。"})})]})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(d,{loading:i,type:"primary",onClick:()=>a.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(d,{type:"default",onClick:()=>c(-1),children:"取消"})})]})})]})};export{xe as default};
