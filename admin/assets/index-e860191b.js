import{u as h,b as y,r as n,t as j,j as e,S as k,E as C,m as b,M as E}from"./index-e664e6dc.js";import{c as S,a as v}from"./wenda-cc030b29.js";import{B as w}from"./index-6997ccbf.js";import{P as r}from"./index-0c53b4ac.js";import{T as B}from"./Table-ee9d831a.js";import"./LeftOutlined-feda539a.js";import"./addEventListener-263e58b1.js";import"./useIcons-0af35028.js";import"./CheckOutlined-f7d7f4b2.js";import"./Pagination-2f0e5cb7.js";import"./useForceUpdate-932ad153.js";import"./responsiveObserver-8e0341fc.js";import"./index-640f3908.js";import"./index-fa5b0e30.js";import"./iconUtil-a09ccdfb.js";const{confirm:N}=E,G=()=>{const d=h(),i=y(),[o,a]=n.useState(!1),[m,c]=n.useState([]),[l,p]=n.useState(!1);n.useEffect(()=>{document.title="问答分类",d(j("问答分类"))},[]),n.useEffect(()=>{u()},[l]);const u=()=>{o||(a(!0),S().then(t=>{c(t.data.data),a(!1)}).catch(t=>{a(!1)}))},f=()=>{c([]),p(!l)},x=[{title:"排序",width:120,render:(t,s)=>e.jsx("span",{children:s.sort})},{title:"分类名",dataIndex:"name",render:t=>e.jsx("span",{children:t})},{title:"操作",width:130,render:(t,s)=>e.jsxs(k,{children:[e.jsx(r,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.Wenda.category.update",onClick:()=>{i("/wenda/question/category/update?id="+s.id)},disabled:null}),e.jsx(r,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.Wenda.category.delete",onClick:()=>{g(s.id)},disabled:null})]})}],g=t=>{t!==0&&N({title:"操作确认",icon:e.jsx(C,{}),content:"确认删除此分类？",centered:!0,okText:"确认",cancelText:"取消",onOk(){o||(a(!0),v(t).then(()=>{a(!1),b.success("删除成功"),f()}).catch(s=>{a(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(w,{title:"问答分类"}),e.jsx("div",{className:"float-left mb-30 mt-30",children:e.jsx(r,{type:"primary",text:"新建问答分类",class:"",icon:null,p:"addons.Wenda.category.store",onClick:()=>i("/wenda/question/category/create"),disabled:null})}),e.jsx("div",{className:"float-left",children:e.jsx(B,{loading:o,columns:x,dataSource:m,rowKey:t=>t.id,pagination:!1})})]})};export{G as default};
